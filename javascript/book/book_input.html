<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ë„ì„œ ì…ë ¥ ë° ì¹´í…Œê³ ë¦¬ ì¶”ì²œ</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #f8f8ff;
      padding: 20px;
    }

    h1 {
      text-align: center;
      color: #333;
    }

    form, .controls {
      max-width: 500px;
      margin: auto;
      padding: 20px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin: 10px 0 5px;
      font-weight: bold;
    }

    input, select {
      width: 100%;
      padding: 8px;
      font-size: 16px;
      margin-bottom: 15px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }

    button {
      width: 100%;
      padding: 12px;
      font-size: 16px;
      background-color: #4e6bff;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    .output {
      max-width: 700px;
      margin: 30px auto;
      padding: 20px;
      background-color: #eef1ff;
      border-radius: 12px;
    }

    .output h2 {
      color: #4e6bff;
    }

    .book-item {
      margin-bottom: 10px;
      padding: 10px;
      background: white;
      border: 1px solid #ccc;
      border-radius: 8px;
      position: relative;
    }

    .delete-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background: #ff4d4d;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 6px;
      cursor: pointer;
    }
    .search-area {
    display: flex;
    max-width: 500px;
    width: 100%;
    margin: 20px auto;
    gap: 10px;
    box-sizing: border-box;
    }

    #searchInput {
    width: 390px; /* 500 - 100(ë²„íŠ¼ ë„ˆë¹„) - 10(gap) */
    padding: 8px 12px;
    font-size: 16px;
    border: 1px solid #ccc;
    border-radius: 6px;
    height: 40px;
    box-sizing: border-box;
    }

    #searchBtn {
    width: 100px;
    height: 40px;
    font-size: 16px;
    background-color: #4e6bff;
    border: none;
    border-radius: 6px;
    color: white;
    cursor: pointer;
    box-sizing: border-box;
    transition: background-color 0.3s ease;
    }

    #searchBtn:hover {
    background-color: #3b54d1;
    }

  </style>
</head>
<body>

<h1>ğŸ“š ë„ì„œ ì…ë ¥, ì¶”ì²œ, ê²€ìƒ‰ ì‹œìŠ¤í…œ</h1>

<!-- ë„ì„œ ê²€ìƒ‰ ì˜ì—­ -->
<div class="search-area">
  <input type="text" id="searchInput" placeholder="ì œëª© ë˜ëŠ” ì €ìëª…ìœ¼ë¡œ ê²€ìƒ‰" />
  <button id="searchBtn">ê²€ìƒ‰</button>
</div>

<!-- ê²€ìƒ‰ ê²°ê³¼ ì¶œë ¥ -->
<div class="output" id="searchResults"></div>

<form id="bookForm">
  <label>ì œëª©</label>
  <input type="text" id="title" required>

  <label>ì €ì</label>
  <input type="text" id="author" required>

  <label>ê°€ê²©</label>
  <input type="number" id="price" required>

  <label>ì¬ê³ </label>
  <input type="number" id="stock" required>

  <label>ì¹´í…Œê³ ë¦¬</label>
  <!--required: ì‚¬ìš©ìê°€ ë°˜ë“œì‹œ ê°’ì„ ì„ íƒí•´ì•¼ í•¨ì„ ì˜ë¯¸. ì•ˆì“°ë©´ ìë™ìœ¼ë¡œ ê²½ê³ -->
  <select id="category" required> 
    <option value="í”„ë¡œê·¸ë˜ë°">í”„ë¡œê·¸ë˜ë°</option>
    <option value="ê²½ì œ">ê²½ì œ</option>
    <option value="ì†Œì„¤">ì†Œì„¤</option>
    <option value="ê¸°íƒ€">ê¸°íƒ€</option>
  </select>

  <button type="submit">ë„ì„œ ë“±ë¡</button>
</form>

<div class="output" id="currentBook">
  <!-- ë“±ë¡ëœ ë„ì„œ ì¶œë ¥ -->
</div>

<div class="output" id="relatedBooks">
  <!-- ê°™ì€ ì¹´í…Œê³ ë¦¬ ë„ì„œ ì¶œë ¥ -->
</div>

<div class="output" id="bestsellers">
  <!-- ë² ìŠ¤íŠ¸ì…€ëŸ¬ ë„ì„œ ì¶œë ¥ -->
</div>

<!-- ì „ì²´ ë„ì„œ ëª©ë¡ ì˜ì—­ -->
<div class="list-and-sort" style="display: flex; gap: 20px; margin-top: 20px;">
    <!-- ì „ì²´ ë„ì„œ ëª©ë¡ì´ ì—¬ê¸° ì¶œë ¥ë©ë‹ˆë‹¤ -->
</div> 


<script>
  let books = [];

  const saved = localStorage.getItem('books');
  if (saved) {
    books = JSON.parse(saved);
  } else {
    books = [
      { title: "ìë°”ìŠ¤í¬ë¦½íŠ¸ ì™„ë²½ ê°€ì´ë“œ", author: "David Flanagan", price: 35000, stock: 5, category: "í”„ë¡œê·¸ë˜ë°" },
      { title: "ëª¨ë˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ Deep Dive", author: "ì´ì›…ëª¨", price: 40000, stock: 0, category: "í”„ë¡œê·¸ë˜ë°" },
      { title: "ëˆì˜ ì‹¬ë¦¬í•™", author: "ëª¨ê±´ í•˜ìš°ì ˆ", price: 18000, stock: 3, category: "ê²½ì œ" },
      { title: "ë¶ˆí¸í•œ í¸ì˜ì ", author: "ê¹€í˜¸ì—°", price: 14500, stock: 2, category: "ì†Œì„¤" },
      { title: "ì—­í–‰ì", author: "ìì²­", price: 17500, stock: 10, category: "ê¸°íƒ€", bestseller: true, img: "https://contents.kyobobook.co.kr/sih/fit-in/458x0/pdt/9788901272580.jpg" },
      { title: "íŠ¸ë Œë“œ ì½”ë¦¬ì•„ 2024", author: "ê¹€ë‚œë„ ì™¸", price: 19800, stock: 10, category: "ê¸°íƒ€", bestseller: true, img: "https://contents.kyobobook.co.kr/sih/fit-in/458x0/pdt/9788959897179.jpg" },
      { title: "ë¶ˆí¸í•œ í¸ì˜ì  2", author: "ê¹€í˜¸ì—°", price: 14500, stock: 5, category: "ì†Œì„¤", bestseller: true, img: "https://contents.kyobobook.co.kr/sih/fit-in/458x0/pdt/9791161571188.jpg" },
      { title: "ì„¸ì´ë…¸ì˜ ê°€ë¥´ì¹¨", author: "ì„¸ì´ë…¸", price: 6480, stock: 20, category: "ê¸°íƒ€", bestseller: true, img: "https://contents.kyobobook.co.kr/sih/fit-in/458x0/pdt/9791168473690.jpg" },
      { title: "ë„ë‘‘ë§ì€ ì§‘ì¤‘ë ¥", author: "ìš”í•œ í•˜ë¦¬", price: 17820, stock: 8, category: "ê¸°íƒ€", bestseller: true, img: "https://contents.kyobobook.co.kr/sih/fit-in/458x0/pdt/9791167740984.jpg" }
    ];
  }

   function saveBooks() {
    localStorage.setItem('books', JSON.stringify(books));
  }
  // ë„ì„œ ë“±ë¡ í¼ì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì¶”ê°€
  // element.addEventListener(eventType, callbackFunction);
  //eventType="click", "submit", "keydown" ë“±, ê°ì§€í•  ì´ë²¤íŠ¸ì˜ ì¢…ë¥˜
  //callbackFunction=ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆì„ ë•Œ ì‹¤í–‰í•  í•¨ìˆ˜ (ì§ì ‘ ì •ì˜í•˜ê±°ë‚˜ í•¨ìˆ˜ ì´ë¦„ ì „ë‹¬)
  document.getElementById('bookForm').addEventListener('submit', function(event) {
    // í¼ ì œì¶œ ì‹œ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ì„ ë§‰ìŒ
    event.preventDefault();
    // ì…ë ¥ëœ ê°’ë“¤ì„ ê°€ì ¸ì˜´ (ì•ë’¤ ê³µë°± ì œê±°)
    const title = document.getElementById('title').value.trim();
    const author = document.getElementById('author').value.trim();
    const price = parseInt(document.getElementById('price').value); // ê°€ê²© (ì •ìˆ˜ë¡œ ë³€í™˜)
    const stock = parseInt(document.getElementById('stock').value); // ì¬ê³  (ì •ìˆ˜ë¡œ ë³€í™˜)
    const category = document.getElementById('category').value;

    // ëª¨ë“  í•„ë“œê°€ ì œëŒ€ë¡œ ì…ë ¥ë˜ì—ˆëŠ”ì§€ í™•ì¸
    if (!title || !author || isNaN(price) || isNaN(stock)) {
      alert("ëª¨ë“  í•„ë“œë¥¼ ì •í™•íˆ ì…ë ¥í•´ì£¼ì„¸ìš”."); // ì…ë ¥ ëˆ„ë½ ë˜ëŠ” ìˆ«ì ì˜¤ë¥˜ ì‹œ ê²½ê³ 
      return;
    }

    const newBook = { title, author, price, stock, category }; // ë„ì„œ ê°ì²´ë¥¼ ìƒì„±
    books.push(newBook); // ìƒì„±í•œ ë„ì„œë¥¼ books ë°°ì—´ì— ì¶”ê°€
    saveBooks(); // ì €ì¥ ì¶”ê°€

    showCurrentBook(newBook); // í˜„ì¬ ì…ë ¥ëœ ë„ì„œë¥¼ ìƒë‹¨ì— ë³´ì—¬ì£¼ëŠ” í•¨ìˆ˜ í˜¸ì¶œ
    showRelatedBooks(newBook.category, newBook);  // ê°™ì€ ì¹´í…Œê³ ë¦¬ì˜ ë‹¤ë¥¸ ë„ì„œë¥¼ ì¶”ì²œ ëª©ë¡ìœ¼ë¡œ ë³´ì—¬ì£¼ëŠ” í•¨ìˆ˜ í˜¸ì¶œ
    this.reset(); // í¼ ì…ë ¥ ë‚´ìš© ì´ˆê¸°í™”
  });

  // ì…ë ¥í•œ ë„ì„œ ì •ë³´ë¥¼ í™”ë©´ì— ì¶œë ¥í•˜ëŠ” í•¨ìˆ˜
  function showCurrentBook(book) {
    const div = document.getElementById('currentBook'); // ì¶œë ¥í•  ìœ„ì¹˜ ì§€ì •
    // ë„ì„œ ì •ë³´ë¥¼ HTML í˜•ì‹ìœ¼ë¡œ êµ¬ì„±í•´ì„œ ì¶œë ¥
    div.innerHTML = `
      <h2>ğŸ“Œ ì…ë ¥í•œ ë„ì„œ ì •ë³´</h2>
      <div class="book-item">
        <strong>ì œëª©:</strong> ${book.title}<br>
        <strong>ì €ì:</strong> ${book.author}<br>
        <strong>ê°€ê²©:</strong> ${book.price.toLocaleString()}ì›<br>
        <strong>ì¬ê³ :</strong> ${book.stock}ê¶Œ<br>
        <strong>ì¹´í…Œê³ ë¦¬:</strong> ${book.category}
      </div>
    `;
  }

  // ê°™ì€ ì¹´í…Œê³ ë¦¬ì— ì†í•œ ë‹¤ë¥¸ ë„ì„œë“¤ì„ ì¶”ì²œ ëª©ë¡ìœ¼ë¡œ ì¶œë ¥í•˜ëŠ” í•¨ìˆ˜
  function showRelatedBooks(category, excludeBook) {
    const div = document.getElementById('relatedBooks');
    // ì…ë ¥í•œ ë„ì„œë¥¼ ì œì™¸í•˜ê³ , ê°™ì€ ì¹´í…Œê³ ë¦¬ì— ì†í•œ ë„ì„œë“¤ë§Œ í•„í„°ë§
    const related = books.filter(book => book.category === category && book !== excludeBook);

    // ê°™ì€ ì¹´í…Œê³ ë¦¬ ë„ì„œê°€ ì—†ì„ ê²½ìš° ë©”ì‹œì§€ í‘œì‹œ
    if (related.length === 0) {
      div.innerHTML = `<h2>ğŸ” ê°™ì€ ì¹´í…Œê³ ë¦¬ ë„ì„œ</h2><p>ê°™ì€ ì¹´í…Œê³ ë¦¬ì˜ ë‹¤ë¥¸ ë„ì„œê°€ ì—†ìŠµë‹ˆë‹¤.</p>`;
      return;
    }

    // ê°™ì€ ì¹´í…Œê³ ë¦¬ ë„ì„œê°€ ìˆì„ ê²½ìš°, ì œëª©ê³¼ ì •ë³´ ì¶œë ¥
    div.innerHTML = `<h2>ğŸ” ê°™ì€ ì¹´í…Œê³ ë¦¬ ë„ì„œ (${category})</h2>`;

    // ê° ë„ì„œë¥¼ ë°˜ë³µí•˜ë©° í™”ë©´ì— í‘œì‹œ
    related.forEach(book => {
      const item = document.createElement('div');
      item.className = 'book-item';
      item.innerHTML = `
        <strong>ì œëª©:</strong> ${book.title}<br>
        <strong>ì €ì:</strong> ${book.author}<br>
        <strong>ê°€ê²©:</strong> ${book.price.toLocaleString()}ì›<br>
        <strong>ì¬ê³ :</strong> ${book.stock}ê¶Œ
      `;
      div.appendChild(item); // ì¶”ì²œ ë„ì„œ ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€

    });
    // ë² ìŠ¤íŠ¸ì…€ëŸ¬ ì¶œë ¥ë„ í•¨ê»˜ ì‹¤í–‰
    showBestsellers();
  }

   // ë² ìŠ¤íŠ¸ì…€ëŸ¬ ë„ì„œ ì¶œë ¥ í•¨ìˆ˜
  function showBestsellers() {
    const div = document.getElementById('bestsellers');
    const bestsellers = books.filter(book => book.bestseller);

    div.innerHTML = `<h2>ğŸ”¥ ì‘ë…„ë„ ë² ìŠ¤íŠ¸ì…€ëŸ¬</h2>`;

    bestsellers.forEach(book => {
      const item = document.createElement('div');
      item.className = 'book-item';
      item.style.display = 'flex';
      item.style.alignItems = 'center';
      item.style.gap = '15px';

      item.innerHTML = `
        <img src="${book.img}" alt="${book.title}" style="width: 80px; height: 100px; object-fit: cover; border-radius: 4px;">
        <div>
          <strong>ì œëª©:</strong> ${book.title}<br>
          <strong>ì €ì:</strong> ${book.author}<br>
          <strong>ê°€ê²©:</strong> ${book.price.toLocaleString()}ì›
        </div>
      `;
      div.appendChild(item);
    });
  }

 function deleteBook(title) {
    books = books.filter(book => book.title !== title);
    saveBooks();
    alert("ë„ì„œê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
    location.reload(); // ê°„ë‹¨íˆ ìƒˆë¡œê³ ì¹¨í•˜ì—¬ UI ê°±ì‹ 
  }

   document.getElementById('searchBtn').addEventListener('click', () => {
    const keyword = document.getElementById('searchInput').value.trim().toLowerCase();
    const results = books.filter(book => 
      book.title.toLowerCase().includes(keyword) || book.author.toLowerCase().includes(keyword)
    );

    const resultDiv = document.getElementById('searchResults');
    if (results.length === 0) {
      resultDiv.innerHTML = "<p>ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>";
      return;
    }

    resultDiv.innerHTML = "<h2>ğŸ” ê²€ìƒ‰ ê²°ê³¼</h2>";
    results.forEach(book => {
      const item = document.createElement('div');
      item.className = 'book-item';
      item.innerHTML = generateBookHTML(book);
      resultDiv.appendChild(item);
    });
  });


  document.getElementById('searchBtn').addEventListener('click', () => {
    const keyword = document.getElementById('searchInput').value.trim().toLowerCase();
    const results = books.filter(book => 
        book.title.toLowerCase().includes(keyword) || book.author.toLowerCase().includes(keyword)
    );

    const resultDiv = document.getElementById('searchResults');
    if(results.length === 0) {
        resultDiv.innerHTML = "<p>ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>";
        return;
    }

    resultDiv.innerHTML = "<h2>ğŸ” ê²€ìƒ‰ ê²°ê³¼</h2>";
    results.forEach(book => {
        const item = document.createElement('div');
        item.className = 'book-item';
        item.innerHTML = `
        <strong>ì œëª©:</strong> ${book.title}<br>
        <strong>ì €ì:</strong> ${book.author}<br>
        <strong>ê°€ê²©:</strong> ${book.price.toLocaleString()}ì›<br>
        <strong>ì¬ê³ :</strong> ${book.stock}ê¶Œ
        `;
        resultDiv.appendChild(item);
    });
   });


  // ì „ì²´ ë„ì„œ ë¦¬ìŠ¤íŠ¸ë¥¼ í™”ë©´ì— ì¶œë ¥í•˜ëŠ” í•¨ìˆ˜ ì¶”ê°€
  function showAllBooks() {
  const resultDiv = document.getElementById('searchResults');
  if (books.length === 0) {
    resultDiv.innerHTML = "<p>ë“±ë¡ëœ ë„ì„œê°€ ì—†ìŠµë‹ˆë‹¤.</p>";
    return;
  }
   resultDiv.innerHTML = "<h2>ğŸ“š ì „ì²´ ë„ì„œ ëª©ë¡</h2>";
  books.forEach(book => {
    const item = document.createElement('div');
    item.className = 'book-item';
    item.innerHTML = `
      <strong>ì œëª©:</strong> ${book.title}<br>
      <strong>ì €ì:</strong> ${book.author}<br>
      <strong>ê°€ê²©:</strong> ${book.price.toLocaleString()}ì›<br>
      <strong>ì¬ê³ :</strong> ${book.stock}ê¶Œ<br>
      <strong>ì¹´í…Œê³ ë¦¬:</strong> ${book.category}
    `;
    resultDiv.appendChild(item);
  });
}
  
// í˜ì´ì§€ê°€ ì²˜ìŒ ë¡œë”©ë  ë•Œ ë² ìŠ¤íŠ¸ì…€ëŸ¬ í‘œì‹œ + ì „ì²´ ë„ì„œ ëª©ë¡ ì¶œë ¥
window.onload = () => {
  showBestsellers();
  showAllBooks();
};
</script>

</body>
</html>